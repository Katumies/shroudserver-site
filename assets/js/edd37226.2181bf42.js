"use strict";(globalThis.webpackChunkshroudserver=globalThis.webpackChunkshroudserver||[]).push([[512],{1612:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"shroudserver-architecture/intro","title":"Architecture","description":"Overview","source":"@site/docs/shroudserver-architecture/intro.md","sourceDirName":"shroudserver-architecture","slug":"/shroudserver-architecture/intro","permalink":"/shroudserver-site/docs/shroudserver-architecture/intro","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_label":"Introduction","sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"ShroudServer Architecture","permalink":"/shroudserver-site/docs/category/shroudserver-architecture"},"next":{"title":"Networking - Basics","permalink":"/shroudserver-site/docs/category/networking---basics"}}');var a=t(4848),i=t(8453);const s={sidebar_label:"Introduction",sidebar_position:1},o="Architecture",l={},c=[{value:"Overview",id:"overview",level:2},{value:"High level architecture",id:"high-level-architecture",level:3},{value:"UDP layer",id:"udp-layer",level:4},{value:"Application layer",id:"application-layer",level:4},{value:"Infrastructure layer",id:"infrastructure-layer",level:4},{value:"Domain layer",id:"domain-layer",level:4}];function d(e){const r={admonition:"admonition",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",p:"p",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.header,{children:(0,a.jsx)(r.h1,{id:"architecture",children:"Architecture"})}),"\n",(0,a.jsx)(r.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsx)(r.p,{children:"ShroudServer is a big project, with lots of moving parts. This documentation will try to cover the architecture and design decisions behind the project."}),"\n",(0,a.jsx)(r.admonition,{type:"note",children:(0,a.jsx)(r.p,{children:"This will be updated with more details when I have more time."})}),"\n",(0,a.jsx)(r.h3,{id:"high-level-architecture",children:"High level architecture"}),"\n",(0,a.jsx)(r.p,{children:"ShroudServer is made up of multiple layers, that all have their own responsibilities.\r\nEach layer is separated from the others, and communicates through well-defined interfaces."}),"\n",(0,a.jsx)(r.h4,{id:"udp-layer",children:"UDP layer"}),"\n",(0,a.jsx)(r.p,{children:"ENet-CSharp, will handle the low level networking, connections and packets.\r\nAbstracts away networking details and transforms raw packets to Photon operations.\r\nQueues incoming operations to be handled by upper layers."}),"\n",(0,a.jsx)(r.p,{children:"This layer separates all networking code from game logic.\r\nImplements interfaces provided by upper layers, to move data up and down the stack."}),"\n",(0,a.jsx)(r.h4,{id:"application-layer",children:"Application layer"}),"\n",(0,a.jsx)(r.p,{children:"Application layer is using CQRS pattern to separate read and write operations.\r\nIt uses Wolverine framework to handle messages and commands pipelines.\r\nHandles all game logic, and is responsible for coordinating game state changes."}),"\n",(0,a.jsx)(r.p,{children:"This layer does not care, where the input and output comes and goes to/from.\r\nLater on, some operations could come from other sources, like admin tools."}),"\n",(0,a.jsx)(r.h4,{id:"infrastructure-layer",children:"Infrastructure layer"}),"\n",(0,a.jsx)(r.p,{children:"As a Database, there is MartenDB, using PostgreSQL as a backend.\r\nIt's an event sourced database, that allows us to store game state changes as events."}),"\n",(0,a.jsx)(r.p,{children:"I know the actual implementation uses MongoDB, but I think event sourcing is good fit for MMORPG backend."}),"\n",(0,a.jsx)(r.h4,{id:"domain-layer",children:"Domain layer"}),"\n",(0,a.jsx)(r.p,{children:"Domain has all the events and aggregates that represent the game state.\r\nIt does not have any dependencies to other layers, and is pure C# code."})]})}function h(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,a.jsx)(r,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,r,t)=>{t.d(r,{R:()=>s,x:()=>o});var n=t(6540);const a={},i=n.createContext(a);function s(e){const r=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),n.createElement(i.Provider,{value:r},e.children)}}}]);