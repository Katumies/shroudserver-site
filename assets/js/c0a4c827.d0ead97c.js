"use strict";(globalThis.webpackChunkshroudserver=globalThis.webpackChunkshroudserver||[]).push([[929],{5965:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>a,contentTitle:()=>h,default:()=>l,frontMatter:()=>s,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"networking-basics/photon","title":"Photon Networking","description":"Overview","source":"@site/docs/networking-basics/photon.md","sourceDirName":"networking-basics","slug":"/networking-basics/photon","permalink":"/shroudserver-site/docs/networking-basics/photon","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_label":"Photon Networking","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Introduction","permalink":"/shroudserver-site/docs/networking-basics/intro"},"next":{"title":"Photon Networking - UDP","permalink":"/shroudserver-site/docs/networking-basics/photon-udp"}}');var r=n(4848),i=n(8453);const s={sidebar_label:"Photon Networking",sidebar_position:2},h="Photon Networking",a={},c=[{value:"Overview",id:"overview",level:2},{value:"Photon Server v4",id:"photon-server-v4",level:3},{value:"Photon running licenses",id:"photon-running-licenses",level:4},{value:"Photon code licenses",id:"photon-code-licenses",level:4},{value:"Short intro to Photon protocol",id:"short-intro-to-photon-protocol",level:3}];function d(e){const o={a:"a",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.header,{children:(0,r.jsx)(o.h1,{id:"photon-networking",children:"Photon Networking"})}),"\n",(0,r.jsx)(o.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(o.p,{children:"Let's dive deeper into how Shroud of the Avatar utilizes Photon Unity Networking (PUN) to manage multiplayer interactions."}),"\n",(0,r.jsx)(o.h3,{id:"photon-server-v4",children:"Photon Server v4"}),"\n",(0,r.jsxs)(o.p,{children:["They are running ",(0,r.jsx)(o.a,{href:"https://doc.photonengine.com/server/v4/getting-started/photon-server-in-5min",children:"Photon Server v4"})," on-premise, meaning, they host that server in some data center or backoffice.\r\nEvidence from the client side points that they are using ",(0,r.jsx)(o.a,{href:"https://doc.photonengine.com/server/v4/applications/lite-application",children:"lite-application example"})," as a base for their custom server logic."]}),"\n",(0,r.jsxs)(o.p,{children:["Photon has a custom binary protocol over TCP/UDP, and it's based on ",(0,r.jsx)(o.a,{href:"http://enet.bespin.org/",children:"ENet"}),", a reliable UDP networking library.\r\nPhoton products are not open source, but they provide a ",(0,r.jsx)(o.a,{href:"https://www.photonengine.com/sdks#server",children:"SDK"})," for free to develop and run your own server."]}),"\n",(0,r.jsx)(o.h4,{id:"photon-running-licenses",children:"Photon running licenses"}),"\n",(0,r.jsx)(o.p,{children:"Photon uses licenses based on CCU (concurrent users). They have a free tier for up to 20 CCU, but additional CCU comes with the price."}),"\n",(0,r.jsx)(o.h4,{id:"photon-code-licenses",children:"Photon code licenses"}),"\n",(0,r.jsx)(o.p,{children:"It's a bit complicated, but in short, I do not use any photon sdk code in my projects, to be safe."}),"\n",(0,r.jsx)(o.h3,{id:"short-intro-to-photon-protocol",children:"Short intro to Photon protocol"}),"\n",(0,r.jsx)(o.p,{children:"Photon can handle multiple different connection types, including WebSocket, http, UDP, and TCP. UDP is the commong game networking protocol, and it's the one used by SotA + Photon.\r\nPhoton protocol is a custom binary protocol, that is not documented, but there are some sources here and there, that I have used to reverse engineer it."}),"\n",(0,r.jsx)(o.p,{children:'Photon uses terms like "Operation", to abstract networking concepts. An operation is anything that needs to be sent between client and server.\r\nFor example, "RequestLog" is an operation that client uses to send logging information to the server.\r\nThere\'s something like 150 different operations, that all needs to be handled by the server.\r\nThere\'s RPC (remote procedure call) operations also, that invoke a method on a remote client or server.'}),"\n",(0,r.jsx)(o.p,{children:"UDP layer is handled by modified ENet, that runs underneath Photon server. That is also closed"})]})}function l(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,r.jsx)(o,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,o,n)=>{n.d(o,{R:()=>s,x:()=>h});var t=n(6540);const r={},i=t.createContext(r);function s(e){const o=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function h(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(i.Provider,{value:o},e.children)}}}]);